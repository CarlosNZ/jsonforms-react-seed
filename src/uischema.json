{
  "type": "VerticalLayout",
  "elements": [
    {
      "type": "Group",
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/email"
        },
        { "type": "Text", "text": "Where are you from?" },
        {
          "type": "Control",
          "scope": "#/properties/country"
        },
        {
          "type": "Control",
          "scope": "#/properties/city",
          "visible": { "operator": "getData", "property": "country", "fallback": false, "outputType": "bool" }
        },
        {
          "type": "Text",
          "text": {
            "operator": "?",
            "condition": {
              "operator": "AND",
              "values": [
                { "operator": "getData", "property": "city", "fallback": false },
                { "operator": "getData", "property": "country", "fallback": false }
              ]
            },
            "valueIfTrue": {
              "operator": "stringSubstitution",
              "string": "You are from %1, %2",
              "replacements": [
                { "operator": "getData", "property": "city" },
                { "operator": "getData", "property": "country" }
              ]
            },
            "valueIfFalse": ""
          }
        }
      ]
    },
    {
      "type": "Group",
      "elements": [
        {
          "type": "Text",
          "text": {
            "operator": "?",
            "condition": {
              "operator": ">",
              "values": [
                { "operator": "count", "values": { "operator": "getData", "property": "multiSelect", "fallback": [] } },
                0
              ]
            },
            "valueIfTrue": {
              "operator": "stringSubstitution",
              "string": "You have selected %1 items",
              "replacements": [
                { "operator": "count", "values": { "operator": "getData", "property": "multiSelect" }, "fallback": 0 }
              ]
            },
            "valueIfFalse": "Please select some items"
          }
        },
        {
          "type": "VerticalLayout",
          "label": "Select some items",
          "elements": [
            {
              "type": "Control",
              "label": "Select multiple",
              "scope": "#/properties/multiSelect"
            }
          ]
        }
      ]
    },
    {
      "type": "Group",
      "elements": [
        {
          "type": "HorizontalLayout",
          "elements": [
            {
              "type": "Control",
              "scope": "#/properties/number1"
            },
            {
              "type": "Control",
              "scope": "#/properties/number2"
            }
          ]
        },
        {
          "type": "Text",
          "text": {
            "operator": "stringSubstitution",
            "string": "%1 plus %2 equals %3",
            "replacements": ["$num1", "$num2", { "operator": "+", "values": ["$num1", "$num2"] }],
            "$num1": { "operator": "getData", "property": "number1", "fallback": 0 },
            "$num2": { "operator": "getData", "property": "number2", "fallback": 0 }
          }
        }
      ]
    },
    {
      "type": "Group",
      "elements": [
        {
          "type": "HorizontalLayout",
          "elements": [
            {
              "type": "VerticalLayout",
              "elements": [
                {
                  "type": "Control",
                  "label": "Are you vegetarian?",
                  "scope": "#/properties/vegetarian"
                },
                {
                  "type": "Control",
                  "scope": "#/properties/mealChoice"
                }
              ]
            },
            {
              "type": "VerticalLayout",
              "elements": [
                {
                  "type": "Control",
                  "scope": "#/properties/date",
                  "$isEnabled": {
                    "operator": "getData",
                    "property": "mealChoice",
                    "fallback": false,
                    "outputType": "bool"
                  },
                  "label": {
                    "operator": "?",
                    "condition": "$isEnabled",
                    "valueIfTrue": "Select a date",
                    "valueIfFalse": "Waiting for meal choice..."
                  },
                  "enabled": "$isEnabled"
                },
                {
                  "type": "Text",
                  "text": {
                    "operator": "stringSubstitution",
                    "string": "The selected date is %1",
                    "replacements": [
                      {
                        "operator": "match",
                        "match": {
                          "operator": "customFunctions",
                          "functionPath": "checkDate",
                          "args": [{ "operator": "getData", "property": "date" }]
                        },
                        "branches": { "-1": "in the past", "0": "today", "1": "in the future" }
                      }
                    ],
                    "fallback": ""
                  },
                  "visible": { "operator": "getData", "property": "date", "fallback": false, "outputType": "bool" }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
